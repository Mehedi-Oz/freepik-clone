{
  "version": 3,
  "sources": ["../src/js/script.js"],
  "sourcesContent": ["// =============================================\n// CONSTANTS\n// =============================================\nconst BREAKPOINTS = {\n  MOBILE: 640,\n  TABLET: 768,\n  DESKTOP: 1280,\n};\n\nconst PAGINATION = {\n  ITEMS_PER_PAGE: 20,\n  MAX_PAGES: 1000,\n};\n\n// Environment from PHP (default to production)\nconst ENVIRONMENT = window.ENVIRONMENT || 'production';\n\n// =============================================\n// GLOBAL ERROR HANDLING\n// =============================================\nwindow.addEventListener('error', function (event) {\n  console.error('Global error:', event.error);\n  if (ENVIRONMENT === 'development') {\n    console.error('Error details:', {\n      message: event.message,\n      filename: event.filename,\n      lineno: event.lineno,\n      colno: event.colno,\n      error: event.error,\n    });\n  }\n  // Prevent default error handling\n  return false;\n});\n\nwindow.addEventListener('unhandledrejection', function (event) {\n  console.error('Unhandled promise rejection:', event.reason);\n  if (ENVIRONMENT === 'development') {\n    console.error('Rejection details:', event.reason);\n  }\n});\n\n// Safe event handler wrapper\nfunction safeEventHandler(handler) {\n  return function (...args) {\n    try {\n      return handler.apply(this, args);\n    } catch (error) {\n      console.error('Error in event handler:', error);\n      if (ENVIRONMENT === 'development') {\n        console.error('Handler error details:', {\n          error: error.message,\n          stack: error.stack,\n          args: args,\n        });\n      }\n    }\n  };\n}\n\n// =============================================\n// UTILITY FUNCTIONS\n// =============================================\n// Escape HTML to prevent XSS\nfunction escapeHtml(text) {\n  const div = document.createElement('div');\n  div.textContent = text;\n  return div.innerHTML;\n}\n\n// Performance: Debounce utility\nfunction debounce(func, wait) {\n  let timeout;\n  return function executedFunction(...args) {\n    const later = () => {\n      clearTimeout(timeout);\n      func(...args);\n    };\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n}\n\n// =============================================\n// DOM ELEMENT CACHE\n// =============================================\n// Cache frequently accessed DOM elements\nconst elements = {\n  // Will be populated on DOMContentLoaded\n  sidebar: null,\n  sidebarTexts: null,\n  sidebarMenuLinks: null,\n  sidebarMenuSvgs: null,\n  sidebarLogoImg: null,\n  sidebarSignin: null,\n  sidebarHelperIcons: null,\n  imageGallery: null,\n  tagsContainer: null,\n  // Filter elements\n  filterSection: null,\n  desktopFilters: {},\n  // Mobile elements\n  mobileSidebar: null,\n  mobileSidebarOverlay: null,\n  mobileMenuBtn: null,\n  mobileSidebarClose: null,\n};\n\n// Function to refresh cached elements (call after DOM updates)\nfunction refreshElementCache() {\n  elements.sidebar = document.getElementById('logo-sidebar');\n  elements.sidebarTexts = document.querySelectorAll('.sidebar-text');\n  elements.sidebarMenuLinks = document.querySelectorAll('#logo-sidebar .sidebar-menu a');\n  elements.sidebarMenuSvgs = document.querySelectorAll('#logo-sidebar .sidebar-menu svg');\n  elements.sidebarLogoImg = document.getElementById('sidebar-logo-img');\n  elements.sidebarSignin = document.querySelector('.sidebar-signin');\n  elements.sidebarHelperIcons = document.querySelector('.sidebar-helper-icons .flex');\n  elements.imageGallery = document.getElementById('image-gallery');\n  elements.tagsContainer = document.getElementById('tags-container');\n  elements.filterSection = document.getElementById('filters-section');\n\n  // Cache desktop filter buttons and popups\n  const filterIds = ['license', 'ai', 'orientation', 'color', 'people', 'filetype'];\n  filterIds.forEach(id => {\n    elements.desktopFilters[id] = {\n      btn: document.getElementById(`${id}-btn`),\n      popup: document.getElementById(`${id}-popup`),\n      chevron: document.getElementById(`${id}-chevron`)\n    };\n  });\n\n  // Cache mobile sidebar elements\n  elements.mobileSidebar = document.getElementById('mobile-sidebar');\n  elements.mobileSidebarOverlay = document.getElementById('mobile-sidebar-overlay');\n  elements.mobileMenuBtn = document.getElementById('mobile-menu-btn');\n  elements.mobileSidebarClose = document.getElementById('mobile-sidebar-close');\n}\n\n// =============================================\n// CONSOLIDATED INITIALIZATION\n// =============================================\n// Single DOMContentLoaded listener that initializes all components\ndocument.addEventListener('DOMContentLoaded', function () {\n  // Cache DOM elements first\n  refreshElementCache();\n\n  // Initialize all components in order\n  initializeSidebar();\n  initializeSearchBar();\n  initializeDesktopFilters();\n  initializeMobileSidebar();\n  initializeMobileFilters();\n  initializeMobileFilterPopups();\n  initializeSearchTags();\n  initializeSidebarFooter();\n  initializeMobileAllTools();\n  initializeFilterHandlers();\n  initializeImageLazyLoading();\n  initializePeopleCountButtons();\n});\n\n// =============================================\n// IMAGE LAZY LOADING WITH INTERSECTION OBSERVER\n// =============================================\nfunction initializeImageLazyLoading() {\n  // Function to load an image directly\n  function loadImageDirectly(img) {\n    if (!img.dataset.src) return;\n\n    const src = img.dataset.src;\n    img.src = src;\n    img.removeAttribute('data-src');\n    img.classList.add('loaded');\n  }\n\n  // Function to load an image with preload check\n  function loadImage(img) {\n    if (!img.dataset.src) return;\n    if (img.src && img.src !== img.dataset.src && !img.src.includes('data:image/svg')) {\n      // Already loaded\n      return;\n    }\n\n    const imageLoader = new Image();\n    imageLoader.onload = function () {\n      img.src = img.dataset.src;\n      img.classList.remove('loading');\n      img.classList.add('loaded');\n      img.removeAttribute('data-src');\n    };\n    imageLoader.onerror = function () {\n      console.error('Failed to load image:', img.dataset.src);\n      img.classList.add('error');\n      img.classList.remove('loading');\n    };\n    img.classList.add('loading');\n    imageLoader.src = img.dataset.src;\n  }\n\n  // Function to check if image is in viewport\n  function isInViewport(img) {\n    const rect = img.getBoundingClientRect();\n    return (\n      rect.top < window.innerHeight + 200 &&\n      rect.bottom > -200 &&\n      rect.left < window.innerWidth + 200 &&\n      rect.right > -200\n    );\n  }\n\n  // Load all images that are already in viewport immediately\n  function loadVisibleImages() {\n    document.querySelectorAll('img[data-src]').forEach((img) => {\n      if (isInViewport(img)) {\n        loadImageDirectly(img);\n      }\n    });\n  }\n\n  // Initial load of visible images\n  loadVisibleImages();\n\n  // Fallback: If images don't load after 500ms, load them all directly\n  setTimeout(() => {\n    const remainingImages = document.querySelectorAll('img[data-src]');\n    if (remainingImages.length > 0) {\n      remainingImages.forEach((img) => {\n        loadImageDirectly(img);\n      });\n    }\n  }, 500);\n\n  // Check if Intersection Observer is supported\n  if (!('IntersectionObserver' in window)) {\n    // Fallback: Load all remaining images after a short delay\n    setTimeout(() => {\n      document.querySelectorAll('img[data-src]').forEach((img) => {\n        loadImageDirectly(img);\n      });\n    }, 100);\n    return;\n  }\n\n  // Create Intersection Observer with options\n  const imageObserver = new IntersectionObserver(\n    (entries, observer) => {\n      entries.forEach((entry) => {\n        if (entry.isIntersecting) {\n          const img = entry.target;\n          if (img.dataset.src) {\n            loadImageDirectly(img);\n            observer.unobserve(img);\n          }\n        }\n      });\n    },\n    {\n      rootMargin: '200px', // Start loading 200px before image enters viewport\n      threshold: 0.01,\n    }\n  );\n\n  // Store observer globally so it can be reused\n  window.imageObserver = imageObserver;\n\n  // Observe all remaining lazy images\n  document.querySelectorAll('img[data-src]').forEach((img) => {\n    imageObserver.observe(img);\n    img.classList.add('observed');\n  });\n\n  // Also check again after a short delay (in case layout changed)\n  setTimeout(loadVisibleImages, 100);\n}\n\n// Function to observe new images (called after AJAX updates)\nfunction observeLazyImages() {\n  function isInViewport(img) {\n    const rect = img.getBoundingClientRect();\n    return (\n      rect.top < window.innerHeight + 200 &&\n      rect.bottom > -200 &&\n      rect.left < window.innerWidth + 200 &&\n      rect.right > -200\n    );\n  }\n\n  function loadImageDirectly(img) {\n    if (!img.dataset.src) return;\n    const src = img.dataset.src;\n    img.src = src;\n    img.removeAttribute('data-src');\n    img.classList.add('loaded');\n  }\n\n  if (!window.imageObserver) {\n    // Fallback: if observer not available, load all images directly\n    document.querySelectorAll('img[data-src]').forEach((img) => {\n      loadImageDirectly(img);\n    });\n    return;\n  }\n\n  // Load visible images immediately, observe the rest\n  document.querySelectorAll('img[data-src]').forEach((img) => {\n    if (!img.classList.contains('observed')) {\n      if (isInViewport(img)) {\n        // Already visible, load immediately\n        loadImageDirectly(img);\n      } else {\n        // Observe for later\n        window.imageObserver.observe(img);\n        img.classList.add('observed');\n      }\n    }\n  });\n}\n\n// =============================================\n// INITIALIZATION FUNCTIONS\n// =============================================\n\n// Sidebar collapse/expand\nfunction initializeSidebar() {\n  const sidebar = elements.sidebar || document.getElementById('logo-sidebar');\n  const collapseBtn = document.getElementById('sidebar-collapse-btn');\n  const mainContent = document.querySelector('.ml-64');\n  const sidebarLogo = document.querySelector('.sidebar-logo');\n  const sidebarDivider = document.querySelector('.sidebar-divider');\n  const headerLogo = document.querySelector('header img');\n\n  let isCollapsed = localStorage.getItem('sidebarCollapsed') === 'true';\n\n  function handleResize() {\n    const screenWidth = window.innerWidth;\n\n    if (screenWidth < BREAKPOINTS.DESKTOP) {\n      // Mobile view: hide collapse button, sidebar is always hidden on mobile\n      if (collapseBtn) {\n        collapseBtn.style.display = 'none';\n      }\n\n      // On mobile, sidebar is hidden (display: none via CSS max-sm:hidden)\n      // Don't manipulate classes here to avoid conflicts\n    } else if (screenWidth >= BREAKPOINTS.DESKTOP) {\n      // Desktop view: show collapse button and apply user preference\n      if (collapseBtn) {\n        collapseBtn.style.display = 'block';\n      }\n\n      // Apply the user's preferred state\n      if (isCollapsed) {\n        applySidebarCollapse();\n      } else {\n        applySidebarExpand();\n      }\n    }\n  }\n\n  function applySidebarCollapse() {\n    if (headerLogo) {\n      headerLogo.classList.remove('hidden');\n    }\n    sidebar.classList.remove('w-64');\n    sidebar.classList.add('w-16');\n    mainContent.classList.remove('ml-64');\n    mainContent.classList.add('ml-16');\n    sidebarLogo.classList.remove('justify-between');\n    sidebarLogo.classList.add('justify-center');\n    // Use cached elements\n    if (elements.sidebarTexts) {\n      elements.sidebarTexts.forEach((text) => {\n        text.classList.add('hidden');\n      });\n    }\n    if (elements.sidebarLogoImg) {\n      elements.sidebarLogoImg.classList.add('hidden');\n    }\n    sidebarDivider.classList.remove('mx');\n    sidebarDivider.classList.add('mx-2');\n    if (elements.sidebarSignin) {\n      elements.sidebarSignin.classList.add('hidden');\n    }\n\n    if (elements.sidebarMenuLinks) {\n      elements.sidebarMenuLinks.forEach((link) => {\n        link.classList.remove('p-2');\n        link.classList.add('p-1', 'justify-center');\n      });\n    }\n    if (elements.sidebarMenuSvgs) {\n      elements.sidebarMenuSvgs.forEach((svg) => {\n        svg.classList.add('m-1');\n      });\n    }\n\n    const helperIcons = document.querySelector('.sidebar-helper-icons .flex');\n    helperIcons.classList.remove('justify-between');\n    helperIcons.classList.add('flex-col', 'gap-2', 'items-center');\n    const emailIcon = helperIcons.children[0].children[1];\n    emailIcon.classList.add('hidden');\n    const collapseIcon = collapseBtn.querySelector('svg');\n    collapseIcon.classList.add('-rotate-90');\n    document.querySelector('.sidebar-helper-icons .flex').classList.remove('justify-between');\n    document.querySelector('.sidebar-helper-icons .flex').classList.add('justify-center');\n    document.querySelector('.sidebar-helper-icons .flex > div').classList.remove('flex', 'gap-4');\n    document.querySelector('.sidebar-helper-icons .flex > div').classList.add('flex-col', 'gap-2');\n    document.querySelector('.sidebar-helper-icons .flex > div').children[1].classList.add('hidden');\n  }\n\n  function applySidebarExpand() {\n    const foucStyle = document.getElementById('sidebar-fouc-style');\n    if (foucStyle) {\n      foucStyle.remove();\n    }\n\n    if (headerLogo) {\n      headerLogo.classList.add('hidden');\n    }\n    sidebar.classList.remove('w-16');\n    sidebar.classList.add('w-64');\n    mainContent.classList.remove('ml-16');\n    mainContent.classList.add('ml-64');\n    sidebarLogo.classList.add('justify-between');\n    sidebarLogo.classList.remove('justify-center');\n    setTimeout(() => {\n      // Use cached elements\n      if (elements.sidebarTexts) {\n        elements.sidebarTexts.forEach((text) => {\n          text.classList.remove('hidden');\n        });\n      }\n      if (elements.sidebarLogoImg) {\n        elements.sidebarLogoImg.classList.remove('hidden');\n      }\n      if (elements.sidebarSignin) {\n        elements.sidebarSignin.classList.remove('hidden');\n      }\n    }, 150);\n    sidebarDivider.classList.add('mx');\n    sidebarDivider.classList.remove('mx-2');\n\n    if (elements.sidebarMenuLinks) {\n      elements.sidebarMenuLinks.forEach((link) => {\n        link.classList.add('p-2');\n        link.classList.remove('p-1', 'justify-center');\n      });\n    }\n    if (elements.sidebarMenuSvgs) {\n      elements.sidebarMenuSvgs.forEach((svg) => {\n        svg.classList.remove('m-1');\n      });\n    }\n\n    const helperIcons = document.querySelector('.sidebar-helper-icons .flex');\n    helperIcons.classList.add('justify-between');\n    helperIcons.classList.remove('flex-col', 'gap-2', 'items-center');\n    const emailIcon = helperIcons.children[0].children[1];\n    emailIcon.classList.remove('hidden');\n    const collapseIcon = collapseBtn.querySelector('svg');\n    collapseIcon.classList.remove('-rotate-90');\n    document.querySelector('.sidebar-helper-icons .flex').classList.add('justify-between');\n    document.querySelector('.sidebar-helper-icons .flex').classList.remove('justify-center');\n    document.querySelector('.sidebar-helper-icons .flex > div').classList.add('flex', 'gap-4');\n    document\n      .querySelector('.sidebar-helper-icons .flex > div')\n      .classList.remove('flex-col', 'gap-2');\n    document\n      .querySelector('.sidebar-helper-icons .flex > div')\n      .children[1].classList.remove('hidden');\n  }\n\n  window.addEventListener('resize', debounce(handleResize, 250));\n  handleResize();\n\n  collapseBtn?.addEventListener('click', function () {\n    isCollapsed = !isCollapsed;\n    localStorage.setItem('sidebarCollapsed', isCollapsed);\n\n    if (isCollapsed) {\n      applySidebarCollapse();\n    } else {\n      applySidebarExpand();\n    }\n  });\n}\n\n// Search bar clear button\nfunction initializeSearchBar() {\n  const searchInput = document.querySelector('input[type=\"search\"]');\n  const clearIcon = document.querySelector('.absolute.right-20');\n\n  if (searchInput && clearIcon) {\n    function toggleClearButton() {\n      if (searchInput.value.trim() !== '') {\n        clearIcon.classList.remove('hidden');\n      } else {\n        clearIcon.classList.add('hidden');\n      }\n    }\n\n    searchInput.addEventListener('input', toggleClearButton);\n    clearIcon.addEventListener('click', function () {\n      searchInput.value = '';\n      toggleClearButton();\n      searchInput.focus();\n    });\n\n    toggleClearButton();\n  }\n}\n\n// Close <details> elements when clicking outside\ndocument.addEventListener('click', function (e) {\n  const details = document.querySelectorAll('details');\n  details.forEach((detail) => {\n    if (detail.open && !detail.contains(e.target)) {\n      detail.open = false;\n    }\n  });\n});\n\n// Filter bar toggle with cache\nconst chevron = document.querySelector('.chevron');\nconst filtersButton = chevron?.closest('button');\nconst target = document.getElementById('filters-section');\n\n// Load cached state (default: closed/up)\nlet isDown = localStorage.getItem('filterDropdownOpen') === 'true';\n\n// Function to check if we're on desktop\nfunction isDesktopView() {\n  return window.innerWidth >= BREAKPOINTS.MOBILE; // sm breakpoint in Tailwind\n}\n\n// Apply cached state on page load (only on desktop)\nif (chevron && target && isDesktopView()) {\n  if (isDown) {\n    chevron.innerHTML = `<path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"m19.5 8.25-7.5 7.5-7.5-7.5\" />`;\n    target.style.display = 'flex';\n  } else {\n    chevron.innerHTML = `<path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"m4.5 15.75 7.5-7.5 7.5 7.5\" />`;\n    target.style.display = 'none';\n  }\n\n  // Remove FOUC style now that JS has taken over\n  const foucStyle = document.getElementById('filter-fouc-style');\n  if (foucStyle) {\n    foucStyle.remove();\n  }\n}\n\nfiltersButton?.addEventListener('click', () => {\n  const foucStyle = document.getElementById('filter-fouc-style');\n  if (foucStyle) {\n    foucStyle.remove();\n  }\n\n  chevron.innerHTML = isDown\n    ? `<path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"m4.5 15.75 7.5-7.5 7.5 7.5\" />`\n    : `<path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"m19.5 8.25-7.5 7.5-7.5-7.5\" />`;\n  isDown = !isDown;\n\n  // Cache the new state\n  localStorage.setItem('filterDropdownOpen', isDown);\n\n  if (target) {\n    target.style.display = target.style.display === 'none' ? 'flex' : 'none';\n  }\n});\n\n// Reset filter display on resize to prevent conflicts between mobile and desktop views\nwindow.addEventListener(\n  'resize',\n  debounce(() => {\n    if (target) {\n      if (!isDesktopView()) {\n        // On mobile, hide desktop filters\n        target.style.display = 'none';\n      } else {\n        // On desktop, restore cached state\n        target.style.display = isDown ? 'flex' : 'none';\n      }\n    }\n  }, 250)\n);\n\n// Desktop filter popups\nfunction initializeDesktopFilters() {\n  const filterElements = [\n    { btn: 'license-btn', popup: 'license-popup', chevron: 'license-chevron' },\n    { btn: 'ai-btn', popup: 'ai-popup', chevron: 'ai-chevron' },\n    { btn: 'orientation-btn', popup: 'orientation-popup', chevron: 'orientation-chevron' },\n    { btn: 'color-btn', popup: 'color-popup', chevron: 'color-chevron' },\n    { btn: 'people-btn', popup: 'people-popup', chevron: 'people-chevron' },\n    { btn: 'filetype-btn', popup: 'filetype-popup', chevron: 'filetype-chevron' },\n  ];\n\n  function positionPopup(button, popup) {\n    const buttonRect = button.getBoundingClientRect();\n    const scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;\n    popup.style.left = buttonRect.left + scrollLeft + 'px';\n    popup.style.top = buttonRect.bottom + 8 + 'px';\n  }\n\n  function closeAllPopups(except = null) {\n    Object.values(elements.desktopFilters).forEach((element) => {\n      const { popup, chevron } = element;\n      if (popup && popup !== except) {\n        popup.classList.add('hidden');\n        popup.style.display = '';\n      }\n      if (chevron && chevron !== except?.previousElementSibling?.querySelector('svg')) {\n        chevron.classList.remove('rotate-180');\n      }\n    });\n\n    const relevancePopup = document.getElementById('relevance-popup');\n    const relevanceChevron = document.getElementById('relevance-chevron');\n    if (relevancePopup && relevancePopup !== except) {\n      relevancePopup.classList.add('hidden');\n    }\n    if (relevanceChevron) {\n      relevanceChevron.classList.remove('rotate-180');\n    }\n  }\n\n  // Modify the filter popup logic to allow multiple filters to remain open simultaneously\n  Object.values(elements.desktopFilters).forEach((element) => {\n    const { btn, popup, chevron } = element;\n\n    if (btn && popup) {\n      btn.addEventListener('click', (e) => {\n        e.stopPropagation();\n        const isHidden = popup.classList.contains('hidden');\n\n        if (isHidden) {\n          if (isDesktopView()) {\n            closeAllPopups(popup);\n          }\n          positionPopup(btn, popup);\n          popup.classList.remove('hidden');\n          if (chevron) chevron.classList.add('rotate-180');\n        } else {\n          popup.classList.add('hidden');\n          if (chevron) chevron.classList.remove('rotate-180');\n        }\n      });\n      popup.addEventListener('click', (e) => e.stopPropagation());\n    }\n  });\n\n  const relevanceChevron = document.getElementById('relevance-chevron');\n  const relevancePopup = document.getElementById('relevance-popup');\n  const relevanceButton = relevanceChevron?.closest('button');\n\n  if (relevanceButton && relevancePopup) {\n    relevanceButton.addEventListener('click', (e) => {\n      e.stopPropagation();\n      const isHidden = relevancePopup.classList.contains('hidden');\n\n      if (isHidden) {\n        closeAllPopups(relevancePopup);\n        relevancePopup.classList.remove('hidden');\n        relevanceChevron.classList.add('rotate-180');\n      } else {\n        relevancePopup.classList.add('hidden');\n        relevanceChevron.classList.remove('rotate-180');\n      }\n    });\n    relevancePopup.addEventListener('click', (e) => e.stopPropagation());\n  }\n\n  document.addEventListener('click', (e) => {\n    const isInsideFilter = e.target.closest('[id$=\"-btn\"], [id$=\"-chevron\"], [id$=\"-popup\"]');\n    const isInsideRelevance =\n      e.target.closest('#relevance-chevron, #relevance-popup') ||\n      e.target.closest('li:has(#relevance-chevron)');\n    if (!isInsideFilter && !isInsideRelevance) {\n      closeAllPopups();\n    }\n  });\n\n  window.addEventListener('scroll', () => {\n    filterElements.forEach((element) => {\n      const btn = document.getElementById(element.btn);\n      const popup = document.getElementById(element.popup);\n      if (btn && popup && !popup.classList.contains('hidden')) {\n        positionPopup(btn, popup);\n      }\n    });\n  });\n  window.addEventListener(\n    'resize',\n    debounce(() => {\n      filterElements.forEach((element) => {\n        const btn = document.getElementById(element.btn);\n        const popup = document.getElementById(element.popup);\n        if (btn && popup && !popup.classList.contains('hidden')) {\n          positionPopup(btn, popup);\n        }\n      });\n    }, 250)\n  );\n\n  filterElements.forEach((element) => {\n    const popup = document.getElementById(element.popup);\n    if (popup) {\n      popup.classList.add('hidden');\n      popup.style.display = '';\n    }\n  });\n\n  if (relevancePopup) {\n    relevancePopup.classList.add('hidden');\n  }\n}\n\n// Button group toggles\n// Button group toggles\nfunction initializePeopleCountButtons() {\n  document.querySelectorAll('.people-count-btn').forEach((btn) => {\n    btn.addEventListener('click', function () {\n      document\n        .querySelectorAll('.people-count-btn')\n        .forEach((b) => b.classList.remove('bg-green-600'));\n      this.classList.add('bg-green-600');\n    });\n  });\n}\n\n// Mobile sidebar\nfunction initializeMobileSidebar() {\n  const { mobileSidebarOverlay, mobileSidebar, mobileMenuBtn, mobileSidebarClose } = elements;\n\n  mobileMenuBtn?.addEventListener('click', function () {\n    mobileSidebarOverlay.classList.remove('hidden');\n    mobileSidebar.classList.remove('-translate-x-full');\n    document.body.classList.add('overflow-hidden');\n  });\n\n  mobileSidebarClose?.addEventListener('click', function () {\n    mobileSidebarOverlay.classList.add('hidden');\n    mobileSidebar.classList.add('-translate-x-full');\n    document.body.classList.remove('overflow-hidden');\n  });\n\n  mobileSidebarOverlay?.addEventListener('click', function (e) {\n    if (e.target === mobileSidebarOverlay) {\n      mobileSidebarOverlay.classList.add('hidden');\n      mobileSidebar.classList.add('-translate-x-full');\n      document.body.classList.remove('overflow-hidden');\n    }\n  });\n}\n\n// Mobile filter overlay and All Images dropdown\nfunction initializeMobileFilters() {\n  const mobileFiltersBtn = document.getElementById('mobile-filters-btn');\n  const mobileFilterOverlay = document.getElementById('mobile-filter-overlay');\n  const closeFilterOverlayBtn = document.getElementById('close-filter-overlay');\n  const mobileHeaderDim = document.getElementById('mobile-header-dim');\n\n  // All Images dropdown elements\n  const mobileAllImagesBtn = document.getElementById('mobile-all-images-btn');\n  const mobileAllImagesDropdown = document.getElementById('mobile-all-images-dropdown');\n  const mobileAllImagesText = document.getElementById('mobile-all-images-text');\n  const mobileAllImagesChevron = document.getElementById('mobile-all-images-chevron');\n\n  // Open mobile filter overlay\n  mobileFiltersBtn?.addEventListener('click', (e) => {\n    e.stopPropagation();\n    // Close All Images dropdown if open\n    if (mobileAllImagesDropdown) {\n      mobileAllImagesDropdown.classList.add('hidden');\n      mobileAllImagesChevron?.classList.remove('rotate-180');\n    }\n    if (mobileFilterOverlay) {\n      mobileFilterOverlay.classList.remove('hidden');\n      mobileHeaderDim?.classList.remove('hidden');\n      document.body.style.overflow = 'hidden';\n    }\n  });\n\n  // Close mobile filter overlay\n  closeFilterOverlayBtn?.addEventListener('click', () => {\n    if (mobileFilterOverlay) {\n      mobileFilterOverlay.classList.add('hidden');\n      mobileHeaderDim?.classList.add('hidden');\n      document.body.style.overflow = '';\n    }\n  });\n\n  // Toggle All Images dropdown\n  mobileAllImagesBtn?.addEventListener('click', (e) => {\n    e.stopPropagation();\n    const isHidden = mobileAllImagesDropdown?.classList.contains('hidden');\n\n    if (isHidden) {\n      mobileAllImagesDropdown?.classList.remove('hidden');\n      mobileAllImagesChevron?.classList.add('rotate-180');\n    } else {\n      mobileAllImagesDropdown?.classList.add('hidden');\n      mobileAllImagesChevron?.classList.remove('rotate-180');\n    }\n  });\n\n  // Handle category option selection\n  const categoryOptions = document.querySelectorAll('.mobile-category-option');\n  const categoryRadios = document.querySelectorAll('input[name=\"mobile-category\"]');\n\n  categoryRadios.forEach((radio) => {\n    radio.addEventListener('change', function () {\n      const selectedOption = this.closest('.mobile-category-option');\n      const categoryText = selectedOption?.querySelector('span')?.textContent.trim();\n\n      // Update button text\n      if (mobileAllImagesText && categoryText) {\n        mobileAllImagesText.textContent = categoryText;\n      }\n\n      // Update text colors\n      categoryOptions.forEach((opt) => {\n        opt.classList.remove('text-white');\n        opt.classList.add('text-gray-400');\n      });\n      if (selectedOption) {\n        selectedOption.classList.add('text-white');\n        selectedOption.classList.remove('text-gray-400');\n      }\n\n      // Close dropdown\n      mobileAllImagesDropdown?.classList.add('hidden');\n      mobileAllImagesChevron?.classList.remove('rotate-180');\n    });\n  });\n\n  // Close dropdown when clicking outside\n  document.addEventListener('click', (e) => {\n    if (\n      !e.target.closest('#mobile-all-images-btn') &&\n      !e.target.closest('#mobile-all-images-dropdown')\n    ) {\n      mobileAllImagesDropdown?.classList.add('hidden');\n      mobileAllImagesChevron?.classList.remove('rotate-180');\n    }\n  });\n}\n\n// Mobile filter popups\nfunction initializeMobileFilterPopups() {\n  const mobileFilterElements = [\n    { btn: 'mobile-license-btn', popup: 'mobile-license-popup' },\n    { btn: 'mobile-ai-btn', popup: 'mobile-ai-popup' },\n    { btn: 'mobile-orientation-btn', popup: 'mobile-orientation-popup' },\n    { btn: 'mobile-color-btn', popup: 'mobile-color-popup' },\n    { btn: 'mobile-people-btn', popup: 'mobile-people-popup' },\n    { btn: 'mobile-filetype-btn', popup: 'mobile-filetype-popup' },\n  ];\n\n  mobileFilterElements.forEach((element) => {\n    const btn = document.getElementById(element.btn);\n    const popup = document.getElementById(element.popup);\n\n    if (btn && popup) {\n      btn.addEventListener('click', (e) => {\n        e.stopPropagation();\n        const isHidden = popup.classList.contains('hidden');\n\n        if (isHidden) {\n          popup.classList.remove('hidden');\n        } else {\n          popup.classList.add('hidden');\n        }\n      });\n      popup.addEventListener('click', (e) => e.stopPropagation());\n    }\n  });\n}\n\n// Image card overlays\nfunction initializeImageCards() {\n  const icons = {\n    download: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-5 h-5\">\n      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3\" />\n    </svg>`,\n\n    edit: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-5 h-5\">\n      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42\" />\n    </svg>`,\n\n    save: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-5 h-5\">\n      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M12 4.5v15m7.5-7.5h-15\" />\n    </svg>`,\n\n    search: `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-4 h-4\">\n      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"m21 21-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607Z\" />\n    </svg>`,\n  };\n\n  function createImageOverlay() {\n    return `\n      <div class=\"overlay absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all duration-300 rounded-lg\"></div>\n      <div class=\"action-buttons absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex gap-2\">\n        <button title=\"Download\" class=\"download-btn p-2 bg-gray-800 rounded-full text-white hover:bg-gray-700 transition\" data-action=\"download\">\n          ${icons.download}\n        </button>\n        <button title=\"Edit with AI\" class=\"edit-btn p-2 bg-gray-800 rounded-full text-white hover:bg-gray-700 transition\" data-action=\"edit\">\n          ${icons.edit}\n        </button>\n        <button title=\"Save to collection\" class=\"save-btn p-2 bg-gray-800 rounded-full text-white hover:bg-gray-700 transition\" data-action=\"save\">\n          ${icons.save}\n        </button>\n      </div>\n      <div class=\"discover-section absolute bottom-2 left-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300\">\n        <button class=\"discover-btn flex items-center gap-2 text-white bg-gray-800 bg-opacity-70 rounded-full px-3 py-1 text-sm hover:bg-opacity-90 transition\" data-action=\"discover\">\n          ${icons.search}\n          Discover similar\n        </button>\n      </div>\n    `;\n  }\n\n  // Image action functions\n  function downloadImage(imageId) {\n    try {\n      const imageCard = document.querySelector(`[data-image=\"${imageId}\"]`);\n      const imgElement = imageCard?.querySelector('img');\n      if (imgElement && imgElement.src) {\n        const link = document.createElement('a');\n        link.href = imgElement.src;\n        link.download = imgElement.alt || `image-${imageId}`;\n        link.target = '_blank';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        showNotification('Download started', 'success');\n      } else {\n        showNotification('Image not found', 'error');\n      }\n    } catch (error) {\n      console.error('Error downloading image:', error);\n      showNotification('Failed to download image', 'error');\n    }\n  }\n\n  function openImageEditor(imageId) {\n    try {\n      const imageCard = document.querySelector(`[data-image=\"${imageId}\"]`);\n      const imgElement = imageCard?.querySelector('img');\n      if (imgElement && imgElement.src) {\n        // Open image in new window/tab for editing\n        window.open(imgElement.src, '_blank');\n        showNotification('Opening image editor...', 'info');\n      } else {\n        showNotification('Image not found', 'error');\n      }\n    } catch (error) {\n      console.error('Error opening image editor:', error);\n      showNotification('Failed to open image editor', 'error');\n    }\n  }\n\n  function saveToCollection(imageId) {\n    try {\n      // Save to localStorage as a simple collection\n      const collections = JSON.parse(localStorage.getItem('imageCollections') || '[]');\n      if (!collections.includes(imageId)) {\n        collections.push(imageId);\n        localStorage.setItem('imageCollections', JSON.stringify(collections));\n        return true;\n      }\n      return false;\n    } catch (error) {\n      console.error('Error saving to collection:', error);\n      return false;\n    }\n  }\n\n  function findSimilarImages(imageId) {\n    try {\n      const imageCard = document.querySelector(`[data-image=\"${imageId}\"]`);\n      const imgElement = imageCard?.querySelector('img');\n      if (imgElement && imgElement.alt) {\n        // Use the image alt text as search query\n        const searchInput = document.querySelector('input[type=\"search\"]');\n        if (searchInput) {\n          searchInput.value = imgElement.alt;\n          searchInput.dispatchEvent(new Event('input', { bubbles: true }));\n          // Trigger search\n          const searchForm = searchInput.closest('form') || document.querySelector('form');\n          if (searchForm) {\n            searchForm.dispatchEvent(new Event('submit', { bubbles: true, cancelable: true }));\n          }\n        }\n        showNotification('Searching for similar images...', 'info');\n      } else {\n        showNotification('Image information not available', 'error');\n      }\n    } catch (error) {\n      console.error('Error finding similar images:', error);\n      showNotification('Failed to find similar images', 'error');\n    }\n  }\n\n  function showNotification(message, type = 'info') {\n    try {\n      // Create notification element\n      const notification = document.createElement('div');\n      notification.className = `fixed top-4 right-4 z-50 px-4 py-3 rounded-lg shadow-lg transition-all duration-300 transform translate-x-full`;\n\n      // Set colors based on type\n      const colors = {\n        success: 'bg-green-600 text-white',\n        error: 'bg-red-600 text-white',\n        info: 'bg-blue-600 text-white',\n        warning: 'bg-yellow-600 text-white',\n      };\n\n      notification.className += ' ' + (colors[type] || colors.info);\n      notification.textContent = message;\n\n      document.body.appendChild(notification);\n\n      // Animate in\n      requestAnimationFrame(() => {\n        notification.classList.remove('translate-x-full');\n      });\n\n      // Remove after 3 seconds\n      setTimeout(() => {\n        notification.classList.add('translate-x-full');\n        setTimeout(() => {\n          if (notification.parentNode) {\n            notification.parentNode.removeChild(notification);\n          }\n        }, 300);\n      }, 3000);\n    } catch (error) {\n      console.error('Error showing notification:', error);\n      // Fallback to console\n      console.log(`[${type.toUpperCase()}] ${message}`);\n    }\n  }\n\n  function handleImageAction(action, imageId, imageAlt) {\n    try {\n      switch (action) {\n        case 'download':\n          downloadImage(imageId);\n          break;\n\n        case 'edit':\n          openImageEditor(imageId);\n          break;\n\n        case 'save': {\n          const saved = saveToCollection(imageId);\n          if (saved) {\n            showNotification('Image saved to collection!', 'success');\n          } else {\n            showNotification('Image already in collection', 'info');\n          }\n          break;\n        }\n\n        case 'discover':\n          findSimilarImages(imageId);\n          break;\n\n        default:\n          console.warn('Unknown image action:', action);\n      }\n    } catch (error) {\n      console.error('Error handling image action:', error);\n      showNotification('An error occurred. Please try again.', 'error');\n    }\n  }\n\n  const imageCards = document.querySelectorAll('.image-card');\n\n  imageCards.forEach((card) => {\n    card.innerHTML += createImageOverlay();\n\n    const downloadBtn = card.querySelector('.download-btn');\n    const editBtn = card.querySelector('.edit-btn');\n    const saveBtn = card.querySelector('.save-btn');\n    const discoverBtn = card.querySelector('.discover-btn');\n\n    const imageId = card.dataset.image;\n    const imageAlt = card.querySelector('img').alt;\n\n    downloadBtn?.addEventListener(\n      'click',\n      safeEventHandler((e) => {\n        e.preventDefault();\n        handleImageAction('download', imageId, imageAlt);\n      })\n    );\n\n    editBtn?.addEventListener(\n      'click',\n      safeEventHandler((e) => {\n        e.preventDefault();\n        handleImageAction('edit', imageId, imageAlt);\n      })\n    );\n\n    saveBtn?.addEventListener(\n      'click',\n      safeEventHandler((e) => {\n        e.preventDefault();\n        handleImageAction('save', imageId, imageAlt);\n      })\n    );\n\n    discoverBtn?.addEventListener(\n      'click',\n      safeEventHandler((e) => {\n        e.preventDefault();\n        handleImageAction('discover', imageId, imageAlt);\n      })\n    );\n  });\n}\n\n// Search tags with arrow controls\nfunction initializeSearchTags() {\n  const searchInput = document.querySelector('input[type=\"search\"]');\n  const searchTags = document.querySelectorAll('.overflow-x-auto ul li');\n  const tagsContainer = document.getElementById('tags-container');\n  const scrollLeftBtn = document.getElementById('tags-scroll-left');\n  const scrollRightBtn = document.getElementById('tags-scroll-right');\n\n  searchTags.forEach((tag) => {\n    tag.addEventListener('click', function () {\n      const tagText = this.textContent.trim();\n\n      if (searchInput) {\n        searchInput.value = tagText;\n      }\n\n      window.scrollTo({\n        top: 0,\n        behavior: 'smooth',\n      });\n\n      searchTags.forEach((t) => t.classList.remove('bg-gray-600'));\n      this.classList.add('bg-gray-600');\n    });\n  });\n\n  if (tagsContainer && scrollLeftBtn && scrollRightBtn) {\n    const scrollAmount = 300;\n\n    function updateArrows() {\n      const { scrollLeft, scrollWidth, clientWidth } = tagsContainer;\n\n      if (scrollLeft > 0) {\n        scrollLeftBtn.classList.remove('hidden');\n      } else {\n        scrollLeftBtn.classList.add('hidden');\n      }\n\n      if (scrollLeft + clientWidth < scrollWidth - 10) {\n        scrollRightBtn.classList.remove('hidden');\n      } else {\n        scrollRightBtn.classList.add('hidden');\n      }\n    }\n\n    scrollLeftBtn.addEventListener('click', () => {\n      tagsContainer.scrollBy({\n        left: -scrollAmount,\n        behavior: 'smooth',\n      });\n    });\n\n    scrollRightBtn.addEventListener('click', () => {\n      tagsContainer.scrollBy({\n        left: scrollAmount,\n        behavior: 'smooth',\n      });\n    });\n\n    tagsContainer.addEventListener('scroll', updateArrows);\n    updateArrows();\n    window.addEventListener('resize', debounce(updateArrows, 250));\n  }\n}\n\n// Sidebar popup handler\nfunction initializeSidebarFooter() {\n  const sidebar = document.getElementById('logo-sidebar');\n  const sidebarFooterIcons = document.querySelector('.sidebar-helper-icons');\n\n  const popupRegistry = new Set();\n\n  initPopupHandler({\n    buttonId: 'more-options-btn',\n    popupId: 'more-options-popup',\n    popupRegistry: popupRegistry,\n    onOpen: function () {\n      const collapsedFooterIcons = document.getElementById('collapsed-footer-icons');\n      if (sidebar?.classList.contains('w-16') && collapsedFooterIcons) {\n        collapsedFooterIcons.classList.remove('hidden');\n      }\n    },\n    onClose: function () {\n      const collapsedFooterIcons = document.getElementById('collapsed-footer-icons');\n      if (collapsedFooterIcons) {\n        collapsedFooterIcons.classList.add('hidden');\n      }\n    },\n  });\n\n  initPopupHandler({\n    buttonId: 'all-tools-btn',\n    popupId: 'all-tools-popup',\n    popupRegistry: popupRegistry,\n  });\n\n  const collapsedFooterIcons = document.getElementById('collapsed-footer-icons');\n  const collapsedThemeBtn = collapsedFooterIcons?.querySelector('[title=\"Theme\"]');\n\n  if (collapsedThemeBtn) {\n    setupThemePopup(collapsedThemeBtn);\n  }\n\n  if (sidebar && sidebarFooterIcons) {\n    const observer = new MutationObserver(function (mutations) {\n      mutations.forEach(function (mutation) {\n        if (mutation.attributeName === 'class') {\n          const isCollapsed = sidebar.classList.contains('w-16');\n          const helperIconsContainer = sidebarFooterIcons.querySelector('.flex > div');\n          if (helperIconsContainer) {\n            helperIconsContainer.style.display = isCollapsed ? 'none' : 'flex';\n          }\n          if (!isCollapsed && collapsedFooterIcons) {\n            collapsedFooterIcons.classList.add('hidden');\n          }\n        }\n      });\n    });\n\n    observer.observe(sidebar, { attributes: true });\n\n    const isCollapsedOnLoad = sidebar.classList.contains('w-16');\n    const helperIconsContainer = sidebarFooterIcons.querySelector('.flex > div');\n    if (isCollapsedOnLoad && helperIconsContainer) {\n      helperIconsContainer.style.display = 'none';\n    }\n  }\n}\n\n// Popup handler function\nfunction initPopupHandler(config) {\n  const { buttonId, popupId, popupRegistry, onOpen, onClose } = config;\n  const button = document.getElementById(buttonId);\n  const popup = document.getElementById(popupId);\n\n  if (!button || !popup) return;\n\n  function closeOtherPopups() {\n    if (popupRegistry) {\n      popupRegistry.forEach((otherPopup) => {\n        if (otherPopup.element !== popup && !otherPopup.element.classList.contains('hidden')) {\n          otherPopup.element.classList.add('hidden');\n          if (otherPopup.onClose) {\n            otherPopup.onClose();\n          }\n        }\n      });\n    }\n  }\n\n  if (popupRegistry) {\n    popupRegistry.add({\n      element: popup,\n      onClose: onClose,\n    });\n  }\n\n  button.addEventListener('click', function (e) {\n    e.stopPropagation();\n\n    const isCurrentlyHidden = popup.classList.contains('hidden');\n\n    closeOtherPopups();\n\n    if (isCurrentlyHidden) {\n      popup.classList.remove('hidden');\n      if (onOpen) onOpen();\n    } else {\n      popup.classList.add('hidden');\n      if (onClose) onClose();\n    }\n  });\n\n  document.addEventListener('click', function (e) {\n    if (!button.contains(e.target) && !popup.contains(e.target)) {\n      popup.classList.add('hidden');\n      if (onClose) onClose();\n    }\n  });\n\n  popup.querySelectorAll('a').forEach((link) => {\n    link.addEventListener('click', function () {\n      popup.classList.add('hidden');\n      if (onClose) onClose();\n    });\n  });\n\n  popup.addEventListener('click', function (e) {\n    e.stopPropagation();\n  });\n}\n\n// Theme popup setup function\nfunction setupThemePopup(themeButton) {\n  const themePopup = document.createElement('div');\n  themePopup.className =\n    'absolute bottom-full mb-2 w-32 bg-gray-800 border border-gray-600 rounded shadow-lg z-50 text-white text-sm hidden';\n  themePopup.innerHTML = `\n    <ul class=\"py-1\">\n      <li class=\"flex items-center gap-2 px-4 py-2 hover:bg-gray-700 cursor-pointer\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"h-4 w-4\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z\" />\n        </svg>\n        Light\n      </li>\n      <li class=\"flex items-center gap-2 px-4 py-2 hover:bg-gray-700 cursor-pointer\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"h-4 w-4\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z\" />\n        </svg>\n        Dark\n      </li>\n      <li class=\"flex items-center gap-2 px-4 py-2 hover:bg-gray-700 cursor-pointer\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"h-4 w-4\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25\" />\n        </svg>\n        System\n      </li>\n    </ul>\n  `;\n\n  const themeBtnWrapper = document.createElement('div');\n  themeBtnWrapper.className = 'relative';\n  themeButton.parentNode.insertBefore(themeBtnWrapper, themeButton);\n  themeBtnWrapper.appendChild(themeButton);\n  themeBtnWrapper.appendChild(themePopup);\n\n  themeButton.addEventListener('click', function (e) {\n    e.stopPropagation();\n    themePopup.classList.toggle('hidden');\n  });\n\n  document.addEventListener('click', function (e) {\n    if (!themeBtnWrapper.contains(e.target)) {\n      themePopup.classList.add('hidden');\n    }\n  });\n\n  themePopup.querySelectorAll('li').forEach((item) => {\n    item.addEventListener('click', function () {\n      themePopup.classList.add('hidden');\n    });\n  });\n}\n\n// Mobile All Tools page\nfunction initializeMobileAllTools() {\n  const mobileAllToolsBtn = document.querySelector(\n    '#mobile-sidebar ul:nth-of-type(2) li:nth-child(4) a'\n  );\n  const mobileAllToolsPage = document.getElementById('mobile-all-tools-page');\n  const mobileAllToolsBack = document.getElementById('mobile-all-tools-back');\n  const mobileSidebarOverlay = document.getElementById('mobile-sidebar-overlay');\n  const mobileSidebar = document.getElementById('mobile-sidebar');\n\n  if (mobileAllToolsBtn && mobileAllToolsPage) {\n    mobileAllToolsBtn.addEventListener('click', function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      mobileSidebarOverlay.classList.add('hidden');\n      mobileSidebar.classList.add('-translate-x-full');\n      document.body.classList.remove('overflow-hidden');\n\n      mobileAllToolsPage.classList.remove('hidden');\n      document.body.classList.add('overflow-hidden');\n    });\n\n    mobileAllToolsBack?.addEventListener('click', function (e) {\n      e.preventDefault();\n\n      mobileAllToolsPage.classList.add('hidden');\n\n      mobileSidebarOverlay.classList.remove('hidden');\n      mobileSidebar.classList.remove('-translate-x-full');\n      document.body.classList.add('overflow-hidden');\n    });\n\n    mobileAllToolsPage.querySelectorAll('a:not(#mobile-all-tools-back)').forEach((link) => {\n      link.addEventListener('click', function (e) {\n        e.preventDefault();\n        mobileAllToolsPage.classList.add('hidden');\n        document.body.classList.remove('overflow-hidden');\n      });\n    });\n  }\n}\n\n// Filter AJAX handlers\nfunction initializeFilterHandlers() {\n  // Helper function to highlight filter button when non-default option is selected\n  function updateFilterButtonHighlight(buttonId, isActive) {\n    const btn = document.getElementById(buttonId);\n    if (btn) {\n      if (isActive) {\n        btn.style.backgroundColor = 'oklch(44.3% 0.11 240.79)';\n      } else {\n        btn.style.backgroundColor = '';\n      }\n    }\n  }\n\n  // =============================================\n  // UNIFIED FILTER HANDLER\n  // =============================================\n  /**\n   * Unified filter handler for desktop and mobile filters\n   * @param {string} filterName - Filter parameter name (e.g., 'ai-type', 'filetype', 'orientation', 'license')\n   * @param {string} defaultValue - Default value that removes the filter (e.g., 'show_all', 'all')\n   * @param {string} buttonId - ID of the filter button to highlight\n   * @param {string} popupId - ID of the popup to close after selection\n   * @param {boolean} autoApply - Whether to auto-apply (desktop) or just close popup (mobile)\n   * @param {boolean} resetPage - Whether to reset page to 1 when filter changes\n   */\n  function createFilterHandler(\n    filterName,\n    defaultValue,\n    buttonId,\n    popupId,\n    autoApply = true,\n    resetPage = true\n  ) {\n    return function (radio) {\n      radio.addEventListener('change', function () {\n        if (autoApply) {\n          // Desktop: Auto-apply filter\n          const urlParams = new URLSearchParams(window.location.search);\n\n          if (resetPage) {\n            urlParams.delete('page');\n          }\n\n          if (this.value === defaultValue) {\n            urlParams.delete(filterName);\n          } else {\n            urlParams.set(filterName, this.value);\n          }\n\n          // Update URL without reloading\n          const newUrl = window.location.pathname + '?' + urlParams.toString();\n          window.history.pushState({}, '', newUrl);\n\n          // Load images via AJAX immediately\n          loadImagesAjax(urlParams);\n\n          // Highlight button if non-default option selected\n          const isActive = this.value !== defaultValue;\n          updateFilterButtonHighlight(buttonId, isActive);\n\n          // Cache filter state\n          saveFiltersToCache();\n        } else {\n          // Mobile: Just close popup, filters applied via Apply button\n        }\n\n        // Close the popup after selection\n        const popup = document.getElementById(popupId);\n        if (popup) {\n          popup.classList.add('hidden');\n        }\n      });\n    };\n  }\n\n  // =============================================\n  // FILTER CACHING SYSTEM\n  // =============================================\n  const FILTER_CACHE_KEY = 'pixahuntFilters';\n\n  // Save all filter states to localStorage\n  function saveFiltersToCache() {\n    const filters = {\n      'ai-type': document.querySelector('input[name=\"ai-type\"]:checked')?.value || 'show_all',\n      license: document.querySelector('input[name=\"license\"]:checked')?.value || 'all',\n      orientation: document.querySelector('input[name=\"orientation\"]:checked')?.value || 'all',\n      filetype: document.querySelector('input[name=\"filetype\"]:checked')?.value || 'all',\n      color: new URLSearchParams(window.location.search).get('color') || 'all',\n      people: new URLSearchParams(window.location.search).get('people') || 'all',\n    };\n    localStorage.setItem(FILTER_CACHE_KEY, JSON.stringify(filters));\n  }\n\n  // Load and apply filters from URL parameters\n  function loadFiltersFromURL() {\n    const urlParams = new URLSearchParams(window.location.search);\n\n    // Get filter values from URL or use defaults\n    const aiType = urlParams.get('ai-type') || 'show_all';\n    const license = urlParams.get('license') || 'all';\n    const orientation = urlParams.get('orientation') || 'all';\n    const filetype = urlParams.get('filetype') || 'all';\n    const color = urlParams.get('color') || 'all';\n    const people = urlParams.get('people') || 'all';\n\n    // Apply AI filter\n    const aiRadio = document.querySelector(`input[name=\"ai-type\"][value=\"${aiType}\"]`);\n    const mobileAiRadio = document.querySelector(`input[name=\"mobile-ai-type\"][value=\"${aiType}\"]`);\n    if (aiRadio) aiRadio.checked = true;\n    if (mobileAiRadio) mobileAiRadio.checked = true;\n    updateFilterButtonHighlight('ai-btn', aiType !== 'show_all');\n    updateFilterButtonHighlight('mobile-ai-btn', aiType !== 'show_all');\n\n    // Apply License filter\n    const licenseRadio = document.querySelector(`input[name=\"license\"][value=\"${license}\"]`);\n    const mobileLicenseRadio = document.querySelector(\n      `input[name=\"mobile-license\"][value=\"${license}\"]`\n    );\n    if (licenseRadio) licenseRadio.checked = true;\n    if (mobileLicenseRadio) mobileLicenseRadio.checked = true;\n    updateFilterButtonHighlight('license-btn', license !== 'all');\n    updateFilterButtonHighlight('mobile-license-btn', license !== 'all');\n\n    // Apply Orientation filter\n    const orientationRadio = document.querySelector(\n      `input[name=\"orientation\"][value=\"${orientation}\"]`\n    );\n    const mobileOrientationRadio = document.querySelector(\n      `input[name=\"mobile-orientation\"][value=\"${orientation}\"]`\n    );\n    if (orientationRadio) orientationRadio.checked = true;\n    if (mobileOrientationRadio) mobileOrientationRadio.checked = true;\n    updateFilterButtonHighlight('orientation-btn', orientation !== 'all');\n    updateFilterButtonHighlight('mobile-orientation-btn', orientation !== 'all');\n\n    // Apply Filetype filter\n    const filetypeRadio = document.querySelector(`input[name=\"filetype\"][value=\"${filetype}\"]`);\n    const mobileFiletypeRadio = document.querySelector(\n      `input[name=\"mobile-filetype\"][value=\"${filetype}\"]`\n    );\n    if (filetypeRadio) filetypeRadio.checked = true;\n    if (mobileFiletypeRadio) mobileFiletypeRadio.checked = true;\n    updateFilterButtonHighlight('filetype-btn', filetype !== 'all');\n    updateFilterButtonHighlight('mobile-filetype-btn', filetype !== 'all');\n\n    // Apply Color filter highlight\n    updateFilterButtonHighlight('color-btn', color !== 'all');\n    updateFilterButtonHighlight('mobile-color-btn', color !== 'all');\n\n    // Apply People filter highlight\n    updateFilterButtonHighlight('people-btn', people !== 'all');\n    updateFilterButtonHighlight('mobile-people-btn', people !== 'all');\n  }\n\n  // Load filters from URL on page load\n  loadFiltersFromURL();\n\n  // Reload filters from URL on resize (for seamless mobile/desktop switching)\n  window.addEventListener(\n    'resize',\n    debounce(() => {\n      loadFiltersFromURL();\n    }, 250)\n  );\n\n  document.getElementById('apply-filters-btn')?.addEventListener('click', function () {\n    const urlParams = new URLSearchParams(window.location.search);\n\n    // Reset page to 1 when filters change\n    urlParams.delete('page');\n\n    // Handle AI Type\n    const aiType = document.querySelector(\"input[name='ai-type']:checked\");\n    if (aiType) {\n      if (aiType.value === 'show_all') {\n        urlParams.delete('ai-type');\n      } else {\n        urlParams.set('ai-type', aiType.value);\n      }\n    } else {\n      // Default behavior if nothing checked (shouldn't happen usually)\n      urlParams.delete('ai-type');\n    }\n\n    // Update URL without reloading\n    const newUrl = window.location.pathname + '?' + urlParams.toString();\n    window.history.pushState({}, '', newUrl);\n\n    // Load images via AJAX\n    loadImagesAjax(urlParams);\n  });\n\n  // Function to check if any desktop filter is active and show/hide Clear All button\n  window.updateDesktopClearAllVisibility = function () {\n    const clearBtn = document.getElementById('clear-desktop-filters');\n    if (!clearBtn) return;\n\n    const urlParams = new URLSearchParams(window.location.search);\n\n    // Check URL params for active filters\n    const hasLicense = urlParams.has('license') && urlParams.get('license') !== 'all';\n    const hasAiType = urlParams.has('ai-type') && urlParams.get('ai-type') !== 'show_all';\n    const hasOrientation = urlParams.has('orientation') && urlParams.get('orientation') !== 'all';\n    const hasFiletype = urlParams.has('filetype') && urlParams.get('filetype') !== 'all';\n    const hasColor = urlParams.has('color') && urlParams.get('color') !== 'all';\n    const hasPeople = urlParams.has('people') && urlParams.get('people') !== 'all';\n\n    const hasActiveFilter =\n      hasLicense || hasAiType || hasOrientation || hasFiletype || hasColor || hasPeople;\n\n    if (hasActiveFilter) {\n      clearBtn.classList.remove('hidden');\n    } else {\n      clearBtn.classList.add('hidden');\n    }\n  };\n\n  // Alias for local usage\n  const updateDesktopClearAllVisibility = window.updateDesktopClearAllVisibility;\n\n  // Update desktop Clear All button visibility on page load\n  updateDesktopClearAllVisibility();\n\n  // Clear Desktop Filters button\n  document.getElementById('clear-desktop-filters')?.addEventListener('click', function () {\n    // Reset all desktop filter radio buttons to default values\n    const defaultLicense = document.querySelector(\"input[name='license'][value='all']\");\n    const defaultAiType = document.querySelector(\"input[name='ai-type'][value='show_all']\");\n    const defaultOrientation = document.querySelector(\"input[name='orientation'][value='all']\");\n    const defaultFiletype = document.querySelector(\"input[name='filetype'][value='all']\");\n\n    if (defaultLicense) defaultLicense.checked = true;\n    if (defaultAiType) defaultAiType.checked = true;\n    if (defaultOrientation) defaultOrientation.checked = true;\n    if (defaultFiletype) defaultFiletype.checked = true;\n\n    // Clear URL params for filters\n    const urlParams = new URLSearchParams(window.location.search);\n    urlParams.delete('license');\n    urlParams.delete('ai-type');\n    urlParams.delete('orientation');\n    urlParams.delete('filetype');\n    urlParams.delete('color');\n    urlParams.delete('people');\n    urlParams.delete('page');\n\n    // Update URL without reloading\n    const newUrl =\n      window.location.pathname + (urlParams.toString() ? '?' + urlParams.toString() : '');\n    window.history.pushState({}, '', newUrl);\n\n    // Load images via AJAX\n    loadImagesAjax(urlParams);\n\n    // Remove all desktop filter button highlights\n    updateFilterButtonHighlight('license-btn', false);\n    updateFilterButtonHighlight('ai-btn', false);\n    updateFilterButtonHighlight('orientation-btn', false);\n    updateFilterButtonHighlight('filetype-btn', false);\n    updateFilterButtonHighlight('color-btn', false);\n    updateFilterButtonHighlight('people-btn', false);\n\n    // Also clear mobile filter highlights and reset radio buttons\n    updateFilterButtonHighlight('mobile-license-btn', false);\n    updateFilterButtonHighlight('mobile-ai-btn', false);\n    updateFilterButtonHighlight('mobile-orientation-btn', false);\n    updateFilterButtonHighlight('mobile-filetype-btn', false);\n    updateFilterButtonHighlight('mobile-color-btn', false);\n    updateFilterButtonHighlight('mobile-people-btn', false);\n\n    const mobileDefaultLicense = document.querySelector(\n      \"input[name='mobile-license'][value='all']\"\n    );\n    const mobileDefaultAiType = document.querySelector(\n      \"input[name='mobile-ai-type'][value='show_all']\"\n    );\n    const mobileDefaultOrientation = document.querySelector(\n      \"input[name='mobile-orientation'][value='all']\"\n    );\n    const mobileDefaultFiletype = document.querySelector(\n      \"input[name='mobile-filetype'][value='all']\"\n    );\n\n    if (mobileDefaultLicense) mobileDefaultLicense.checked = true;\n    if (mobileDefaultAiType) mobileDefaultAiType.checked = true;\n    if (mobileDefaultOrientation) mobileDefaultOrientation.checked = true;\n    if (mobileDefaultFiletype) mobileDefaultFiletype.checked = true;\n\n    // Clear cache\n    saveFiltersToCache();\n\n    // Hide the Clear All button since filters are now cleared\n    updateDesktopClearAllVisibility();\n    updateClearAllButtonVisibility();\n  });\n\n  // Function to check if any mobile filter is active and show/hide Clear All button\n  window.updateClearAllButtonVisibility = function () {\n    const clearBtn = document.getElementById('clear-mobile-filters');\n    if (!clearBtn) return;\n\n    const urlParams = new URLSearchParams(window.location.search);\n\n    // Check URL params for active filters\n    const hasLicense = urlParams.has('license') && urlParams.get('license') !== 'all';\n    const hasAiType = urlParams.has('ai-type') && urlParams.get('ai-type') !== 'show_all';\n    const hasOrientation = urlParams.has('orientation') && urlParams.get('orientation') !== 'all';\n    const hasFiletype = urlParams.has('filetype') && urlParams.get('filetype') !== 'all';\n    const hasColor = urlParams.has('color') && urlParams.get('color') !== 'all';\n    const hasPeople = urlParams.has('people') && urlParams.get('people') !== 'all';\n\n    // Check current radio button selections (in case not yet applied to URL)\n    const licenseSelected = document.querySelector(\"input[name='mobile-license']:checked\")?.value;\n    const aiTypeSelected = document.querySelector(\"input[name='mobile-ai-type']:checked\")?.value;\n    const orientationSelected = document.querySelector(\n      \"input[name='mobile-orientation']:checked\"\n    )?.value;\n    const filetypeSelected = document.querySelector(\"input[name='mobile-filetype']:checked\")?.value;\n\n    const hasActiveRadio =\n      (licenseSelected && licenseSelected !== 'all') ||\n      (aiTypeSelected && aiTypeSelected !== 'show_all') ||\n      (orientationSelected && orientationSelected !== 'all') ||\n      (filetypeSelected && filetypeSelected !== 'all');\n\n    const hasActiveFilter =\n      hasLicense ||\n      hasAiType ||\n      hasOrientation ||\n      hasFiletype ||\n      hasColor ||\n      hasPeople ||\n      hasActiveRadio;\n\n    if (hasActiveFilter) {\n      clearBtn.classList.remove('hidden');\n    } else {\n      clearBtn.classList.add('hidden');\n    }\n  };\n\n  // Alias for local usage\n  const updateClearAllButtonVisibility = window.updateClearAllButtonVisibility;\n\n  // Update Clear All button visibility on page load\n  updateClearAllButtonVisibility();\n\n  // Update Clear All button visibility when any mobile filter changes\n  document\n    .querySelectorAll(\n      \"input[name='mobile-license'], input[name='mobile-ai-type'], input[name='mobile-orientation'], input[name='mobile-filetype']\"\n    )\n    .forEach((radio) => {\n      radio.addEventListener('change', updateClearAllButtonVisibility);\n    });\n\n  // Also update when mobile filter overlay opens (to catch URL-based filters)\n  document\n    .getElementById('mobile-filters-btn')\n    ?.addEventListener('click', updateClearAllButtonVisibility);\n\n  // Clear Mobile Filters button\n  document.getElementById('clear-mobile-filters')?.addEventListener('click', function () {\n    // Reset all mobile filter radio buttons to default values\n    const defaultLicense = document.querySelector(\"input[name='mobile-license'][value='all']\");\n    const defaultAiType = document.querySelector(\"input[name='mobile-ai-type'][value='show_all']\");\n    const defaultOrientation = document.querySelector(\n      \"input[name='mobile-orientation'][value='all']\"\n    );\n    const defaultFiletype = document.querySelector(\"input[name='mobile-filetype'][value='all']\");\n\n    if (defaultLicense) defaultLicense.checked = true;\n    if (defaultAiType) defaultAiType.checked = true;\n    if (defaultOrientation) defaultOrientation.checked = true;\n    if (defaultFiletype) defaultFiletype.checked = true;\n\n    // Clear URL params for filters\n    const urlParams = new URLSearchParams(window.location.search);\n    urlParams.delete('license');\n    urlParams.delete('ai-type');\n    urlParams.delete('orientation');\n    urlParams.delete('filetype');\n    urlParams.delete('color');\n    urlParams.delete('people');\n    urlParams.delete('page');\n\n    // Update URL without reloading\n    const newUrl =\n      window.location.pathname + (urlParams.toString() ? '?' + urlParams.toString() : '');\n    window.history.pushState({}, '', newUrl);\n\n    // Load images via AJAX\n    loadImagesAjax(urlParams);\n\n    // Remove all filter button highlights\n    updateFilterButtonHighlight('mobile-license-btn', false);\n    updateFilterButtonHighlight('mobile-ai-btn', false);\n    updateFilterButtonHighlight('mobile-orientation-btn', false);\n    updateFilterButtonHighlight('mobile-filetype-btn', false);\n    updateFilterButtonHighlight('mobile-color-btn', false);\n    updateFilterButtonHighlight('mobile-people-btn', false);\n\n    // Also clear desktop filter highlights\n    updateFilterButtonHighlight('license-btn', false);\n    updateFilterButtonHighlight('ai-btn', false);\n    updateFilterButtonHighlight('orientation-btn', false);\n    updateFilterButtonHighlight('filetype-btn', false);\n    updateFilterButtonHighlight('color-btn', false);\n    updateFilterButtonHighlight('people-btn', false);\n\n    // Reset desktop filter radio buttons too\n    const desktopDefaultLicense = document.querySelector(\"input[name='license'][value='all']\");\n    const desktopDefaultAiType = document.querySelector(\"input[name='ai-type'][value='show_all']\");\n    const desktopDefaultOrientation = document.querySelector(\n      \"input[name='orientation'][value='all']\"\n    );\n    const desktopDefaultFiletype = document.querySelector(\"input[name='filetype'][value='all']\");\n\n    if (desktopDefaultLicense) desktopDefaultLicense.checked = true;\n    if (desktopDefaultAiType) desktopDefaultAiType.checked = true;\n    if (desktopDefaultOrientation) desktopDefaultOrientation.checked = true;\n    if (desktopDefaultFiletype) desktopDefaultFiletype.checked = true;\n\n    // Clear cache\n    saveFiltersToCache();\n\n    // Hide the Clear All button since filters are now cleared\n    updateClearAllButtonVisibility();\n\n    // Close the overlay\n    const mobileFilterOverlay = document.getElementById('mobile-filter-overlay');\n    const mobileHeaderDim = document.getElementById('mobile-header-dim');\n    if (mobileFilterOverlay) {\n      mobileFilterOverlay.classList.add('hidden');\n      mobileHeaderDim?.classList.add('hidden');\n      document.body.style.overflow = '';\n    }\n  });\n\n  // Apply Mobile Filters button\n  document.getElementById('apply-mobile-filters')?.addEventListener('click', function () {\n    const urlParams = new URLSearchParams(window.location.search);\n\n    // Reset page to 1 when filters change\n    urlParams.delete('page');\n\n    // Collect all mobile filter values\n    const license = document.querySelector(\"input[name='mobile-license']:checked\")?.value || 'all';\n    const aiType =\n      document.querySelector(\"input[name='mobile-ai-type']:checked\")?.value || 'show_all';\n    const orientation =\n      document.querySelector(\"input[name='mobile-orientation']:checked\")?.value || 'all';\n    const filetype =\n      document.querySelector(\"input[name='mobile-filetype']:checked\")?.value || 'all';\n\n    // Get color and people from URL params (set via button clicks)\n    const currentColor = urlParams.get('color') || 'all';\n    const currentPeople = urlParams.get('people') || 'all';\n\n    // Clear existing filter params\n    urlParams.delete('license');\n    urlParams.delete('ai-type');\n    urlParams.delete('orientation');\n    urlParams.delete('filetype');\n    urlParams.delete('color');\n    urlParams.delete('people');\n\n    // Set new filter values (only if not 'all')\n    if (license !== 'all') urlParams.set('license', license);\n    if (aiType !== 'show_all') urlParams.set('ai-type', aiType);\n    if (orientation !== 'all') urlParams.set('orientation', orientation);\n    if (filetype !== 'all') urlParams.set('filetype', filetype);\n    if (currentColor !== 'all') urlParams.set('color', currentColor);\n    if (currentPeople !== 'all') urlParams.set('people', currentPeople);\n\n    // Update URL without reloading\n    const newUrl = window.location.pathname + '?' + urlParams.toString();\n    window.history.pushState({}, '', newUrl);\n\n    // Load images via AJAX\n    loadImagesAjax(urlParams);\n\n    // Highlight active filter buttons\n    updateFilterButtonHighlight('mobile-license-btn', license !== 'all');\n    updateFilterButtonHighlight('mobile-ai-btn', aiType !== 'show_all');\n    updateFilterButtonHighlight('mobile-orientation-btn', orientation !== 'all');\n    updateFilterButtonHighlight('mobile-filetype-btn', filetype !== 'all');\n    updateFilterButtonHighlight('mobile-color-btn', currentColor !== 'all');\n    updateFilterButtonHighlight('mobile-people-btn', currentPeople !== 'all');\n\n    // Cache filter state\n    saveFiltersToCache();\n\n    // Close the overlay\n    const mobileFilterOverlay = document.getElementById('mobile-filter-overlay');\n    const mobileHeaderDim = document.getElementById('mobile-header-dim');\n    if (mobileFilterOverlay) {\n      mobileFilterOverlay.classList.add('hidden');\n      mobileHeaderDim?.classList.add('hidden'); // Hide header dim\n      document.body.style.overflow = ''; // Restore scroll\n    }\n  });\n\n  // Unified filter handlers - Desktop (auto-apply) and Mobile (close popup only)\n  document\n    .querySelectorAll('input[name=\"ai-type\"]')\n    .forEach(createFilterHandler('ai-type', 'show_all', 'ai-btn', 'ai-popup', true, false));\n  document\n    .querySelectorAll('input[name=\"mobile-ai-type\"]')\n    .forEach(createFilterHandler('ai-type', 'show_all', 'ai-btn', 'mobile-ai-popup', false, false));\n\n  // File Type filter handlers\n  document\n    .querySelectorAll('input[name=\"filetype\"]')\n    .forEach(createFilterHandler('filetype', 'all', 'filetype-btn', 'filetype-popup', true, true));\n  document\n    .querySelectorAll('input[name=\"mobile-filetype\"]')\n    .forEach(\n      createFilterHandler('filetype', 'all', 'filetype-btn', 'mobile-filetype-popup', false, false)\n    );\n\n  // Orientation filter handlers\n  document\n    .querySelectorAll('input[name=\"orientation\"]')\n    .forEach(\n      createFilterHandler('orientation', 'all', 'orientation-btn', 'orientation-popup', true, true)\n    );\n  document\n    .querySelectorAll('input[name=\"mobile-orientation\"]')\n    .forEach(\n      createFilterHandler(\n        'orientation',\n        'all',\n        'orientation-btn',\n        'mobile-orientation-popup',\n        false,\n        false\n      )\n    );\n\n  // License filter handlers\n  document\n    .querySelectorAll('input[name=\"license\"]')\n    .forEach(createFilterHandler('license', 'all', 'license-btn', 'license-popup', true, true));\n  document\n    .querySelectorAll('input[name=\"mobile-license\"]')\n    .forEach(\n      createFilterHandler('license', 'all', 'license-btn', 'mobile-license-popup', false, false)\n    );\n\n  // Add event listener for color filter buttons (desktop and mobile)\n  document.querySelectorAll('[data-color]').forEach((button) => {\n    button.addEventListener('click', function () {\n      const urlParams = new URLSearchParams(window.location.search);\n      const colorValue = this.getAttribute('data-color');\n\n      // Check if mobile overlay is open\n      const mobileOverlay = document.getElementById('mobile-filter-overlay');\n      const isOverlayOpen = mobileOverlay && !mobileOverlay.classList.contains('hidden');\n\n      if (isOverlayOpen) {\n        // Mobile overlay is open - just store value, don't auto-apply\n        // Reset page when filters change\n        urlParams.delete('page');\n        if (colorValue === 'all') {\n          urlParams.delete('color');\n        } else {\n          urlParams.set('color', colorValue);\n        }\n        // Update URL silently without reloading images\n        const newUrl = window.location.pathname + '?' + urlParams.toString();\n        window.history.replaceState({}, '', newUrl);\n      } else {\n        // Desktop or overlay closed - auto-apply\n        // Reset page to 1 when filters change\n        urlParams.delete('page');\n        if (colorValue === 'all') {\n          urlParams.delete('color');\n        } else {\n          urlParams.set('color', colorValue);\n        }\n        const newUrl = window.location.pathname + '?' + urlParams.toString();\n        window.history.pushState({}, '', newUrl);\n        loadImagesAjax(urlParams);\n\n        // Highlight button if non-default option selected\n        const isActive = colorValue !== 'all';\n        updateFilterButtonHighlight('color-btn', isActive);\n        updateFilterButtonHighlight('mobile-color-btn', isActive);\n\n        // Cache filter state\n        saveFiltersToCache();\n      }\n\n      // Close the popup after selection\n      const colorPopup = document.getElementById('color-popup');\n      if (colorPopup) {\n        colorPopup.classList.add('hidden');\n      }\n      const mobileColorPopup = document.getElementById('mobile-color-popup');\n      if (mobileColorPopup) {\n        mobileColorPopup.classList.add('hidden');\n      }\n    });\n  });\n\n  // Add event listener for people filter buttons\n  document.querySelectorAll('[data-people]').forEach((button) => {\n    button.addEventListener('click', function () {\n      const urlParams = new URLSearchParams(window.location.search);\n      const peopleValue = this.getAttribute('data-people');\n\n      // Check if mobile overlay is open\n      const mobileOverlay = document.getElementById('mobile-filter-overlay');\n      const isOverlayOpen = mobileOverlay && !mobileOverlay.classList.contains('hidden');\n\n      if (isOverlayOpen) {\n        // Mobile overlay is open - just store value, don't auto-apply\n        // Reset page when filters change\n        urlParams.delete('page');\n        if (peopleValue === 'all') {\n          urlParams.delete('people');\n        } else {\n          urlParams.set('people', peopleValue);\n        }\n        // Update URL silently without reloading images\n        const newUrl = window.location.pathname + '?' + urlParams.toString();\n        window.history.replaceState({}, '', newUrl);\n      } else {\n        // Desktop or overlay closed - auto-apply\n        // Reset page to 1 when filters change\n        urlParams.delete('page');\n        if (peopleValue === 'all') {\n          urlParams.delete('people');\n        } else {\n          urlParams.set('people', peopleValue);\n        }\n        const newUrl = window.location.pathname + '?' + urlParams.toString();\n        window.history.pushState({}, '', newUrl);\n        loadImagesAjax(urlParams);\n\n        // Highlight button if non-default option selected\n        const isActive = peopleValue !== 'all';\n        updateFilterButtonHighlight('people-btn', isActive);\n        updateFilterButtonHighlight('mobile-people-btn', isActive);\n\n        // Cache filter state\n        saveFiltersToCache();\n      }\n\n      // Close the popup after selection\n      const peoplePopup = document.getElementById('people-popup');\n      if (peoplePopup) {\n        peoplePopup.classList.add('hidden');\n      }\n      const mobilePeoplePopup = document.getElementById('mobile-people-popup');\n      if (mobilePeoplePopup) {\n        mobilePeoplePopup.classList.add('hidden');\n      }\n    });\n  });\n\n  // Add event listener for pagination\n  const prevPageButton = document.getElementById('prev-page-btn');\n  const nextPageButton = document.getElementById('next-page-btn');\n  const pageInput = document.querySelector('.pagination-controls input[type=\"text\"]');\n\n  // Get current page from URL parameters\n  const paginationUrlParams = new URLSearchParams(window.location.search);\n  const currentPageFromUrl = parseInt(paginationUrlParams.get('page'), 10) || 1;\n\n  // Get total pages from the \"of X\" text next to the input\n  const pageInfoText = pageInput?.parentElement?.textContent || '';\n  const totalPagesMatch = pageInfoText.match(/of\\s+(\\d+)/);\n  const totalPages = totalPagesMatch ? parseInt(totalPagesMatch[1], 10) : 1;\n\n  // Initialize input with current page from URL if it's empty\n  if (pageInput && !pageInput.value) {\n    pageInput.value = currentPageFromUrl;\n  }\n\n  if (prevPageButton) {\n    prevPageButton.addEventListener('click', () => {\n      // Don't do anything if button is disabled\n      if (prevPageButton.disabled) {\n        return;\n      }\n\n      const currentPage =\n        parseInt(paginationUrlParams.get('page'), 10) || parseInt(pageInput?.value, 10) || 1;\n      const prevPage = currentPage - 1;\n\n      // Don't go below page 1\n      if (prevPage < 1) {\n        return;\n      }\n\n      const url = new URL(window.location.href);\n      url.searchParams.set('page', prevPage);\n      window.location.href = url.toString();\n    });\n  }\n\n  if (nextPageButton) {\n    nextPageButton.addEventListener('click', () => {\n      // Don't do anything if button is disabled\n      if (nextPageButton.disabled) {\n        return;\n      }\n\n      const currentPage =\n        parseInt(paginationUrlParams.get('page'), 10) || parseInt(pageInput?.value, 10) || 1;\n      const nextPage = currentPage + 1;\n\n      // Don't go beyond total pages\n      if (nextPage > totalPages) {\n        return;\n      }\n\n      const url = new URL(window.location.href);\n      url.searchParams.set('page', nextPage);\n      window.location.href = url.toString();\n    });\n  }\n\n  if (pageInput) {\n    pageInput.addEventListener('change', (event) => {\n      let newPage = parseInt(event.target.value, 10) || 1;\n\n      // Clamp page to valid range\n      if (newPage < 1) {\n        newPage = 1;\n      } else if (newPage > totalPages) {\n        newPage = totalPages;\n      }\n\n      // Update input to show clamped value\n      event.target.value = newPage;\n\n      const url = new URL(window.location.href);\n      url.searchParams.set('page', newPage);\n      window.location.href = url.toString();\n    });\n  }\n\n  // Mobile pagination elements\n  const mobilePrevPageButton = document.getElementById('mobile-prev-page-btn');\n  const mobileNextPageButton = document.getElementById('mobile-next-page-btn');\n  const mobilePageInput = document.getElementById('mobile-page-input');\n  const mobileTotalPagesEl = document.getElementById('mobile-total-pages');\n  const mobileTotalPages = mobileTotalPagesEl\n    ? parseInt(mobileTotalPagesEl.textContent, 10)\n    : totalPages;\n\n  if (mobilePrevPageButton) {\n    mobilePrevPageButton.addEventListener('click', () => {\n      if (mobilePrevPageButton.disabled) return;\n\n      const currentPage =\n        parseInt(paginationUrlParams.get('page'), 10) || parseInt(mobilePageInput?.value, 10) || 1;\n      const prevPage = currentPage - 1;\n\n      if (prevPage < 1) return;\n\n      const url = new URL(window.location.href);\n      url.searchParams.set('page', prevPage);\n      window.location.href = url.toString();\n    });\n  }\n\n  if (mobileNextPageButton) {\n    mobileNextPageButton.addEventListener('click', () => {\n      if (mobileNextPageButton.disabled) return;\n\n      const currentPage =\n        parseInt(paginationUrlParams.get('page'), 10) || parseInt(mobilePageInput?.value, 10) || 1;\n      const nextPage = currentPage + 1;\n\n      if (nextPage > mobileTotalPages) return;\n\n      const url = new URL(window.location.href);\n      url.searchParams.set('page', nextPage);\n      window.location.href = url.toString();\n    });\n  }\n\n  if (mobilePageInput) {\n    mobilePageInput.addEventListener('change', (event) => {\n      let newPage = parseInt(event.target.value, 10) || 1;\n\n      // Clamp page to valid range\n      if (newPage < 1) {\n        newPage = 1;\n      } else if (newPage > mobileTotalPages) {\n        newPage = mobileTotalPages;\n      }\n\n      // Update input to show clamped value\n      event.target.value = newPage;\n\n      const url = new URL(window.location.href);\n      url.searchParams.set('page', newPage);\n      window.location.href = url.toString();\n    });\n  }\n} // End of initializeFilterHandlers\n\n// Function to update pagination controls based on new results\nfunction updatePaginationControls(currentPage, totalPages, totalResults) {\n  // Desktop elements\n  const prevPageBtn = document.getElementById('prev-page-btn');\n  const nextPageBtn = document.getElementById('next-page-btn');\n  const pageInput = document.querySelector('.pagination-controls input[type=\"text\"]');\n  const pageInfoText = pageInput?.parentElement;\n\n  // Mobile elements\n  const mobilePrevPageBtn = document.getElementById('mobile-prev-page-btn');\n  const mobileNextPageBtn = document.getElementById('mobile-next-page-btn');\n  const mobilePageInput = document.getElementById('mobile-page-input');\n  const mobileTotalPages = document.getElementById('mobile-total-pages');\n\n  // Update desktop page input value\n  if (pageInput) {\n    pageInput.value = currentPage;\n  }\n\n  // Update desktop \"of X\" text\n  if (pageInfoText) {\n    pageInfoText.innerHTML = `Page <input type=\"text\" class=\"rounded bg-gray-600 w-12 px-2 py-1 text-center\" value=\"${currentPage}\"> of ${totalPages}`;\n\n    // Re-attach event listener to new input\n    const newPageInput = pageInfoText.querySelector('input[type=\"text\"]');\n    if (newPageInput) {\n      newPageInput.addEventListener('change', (event) => {\n        let newPage = parseInt(event.target.value, 10) || 1;\n        if (newPage < 1) newPage = 1;\n        else if (newPage > totalPages) newPage = totalPages;\n        event.target.value = newPage;\n\n        const url = new URL(window.location.href);\n        url.searchParams.set('page', newPage);\n        window.location.href = url.toString();\n      });\n    }\n  }\n\n  // Update mobile page input and total pages\n  if (mobilePageInput) {\n    mobilePageInput.value = currentPage;\n  }\n  if (mobileTotalPages) {\n    mobileTotalPages.textContent = totalPages;\n  }\n\n  // Helper function to update button state\n  function updateButtonState(btn, isDisabled) {\n    if (!btn) return;\n    if (isDisabled) {\n      btn.disabled = true;\n      btn.classList.remove('bg-white', 'text-gray-800', 'hover:bg-gray-100');\n      btn.classList.add('bg-gray-600', 'text-gray-400', 'cursor-not-allowed');\n    } else {\n      btn.disabled = false;\n      btn.classList.add('bg-white', 'text-gray-800', 'hover:bg-gray-100');\n      btn.classList.remove('bg-gray-600', 'text-gray-400', 'cursor-not-allowed');\n    }\n  }\n\n  // Update Previous buttons state (desktop and mobile)\n  const isPrevDisabled = currentPage <= 1;\n  updateButtonState(prevPageBtn, isPrevDisabled);\n  updateButtonState(mobilePrevPageBtn, isPrevDisabled);\n\n  // Update Next buttons state (desktop and mobile)\n  const isNextDisabled = currentPage >= totalPages || totalPages <= 1;\n  updateButtonState(nextPageBtn, isNextDisabled);\n  updateButtonState(mobileNextPageBtn, isNextDisabled);\n}\n\n// AJAX function to load images (global scope)\nfunction loadImagesAjax(urlParams) {\n  // Reset page to 1 when filters change (unless explicitly set)\n  if (!urlParams.has('page')) {\n    urlParams.delete('page');\n  }\n\n  const imageGallery = document.getElementById('image-gallery');\n  const totalResults = document.querySelector('.tag p');\n\n  // Show skeleton loading animation (optimized with requestAnimationFrame)\n  if (imageGallery) {\n    // Use requestAnimationFrame to avoid blocking main thread\n    requestAnimationFrame(() => {\n      const skeletonCards = Array(12)\n        .fill(0)\n        .map((_, i) => {\n          // Vary heights for visual interest (simulating masonry)\n          const heights = ['h-48', 'h-64', 'h-56', 'h-72', 'h-52', 'h-60'];\n          const height = heights[i % heights.length];\n          return `\n          <div class=\"skeleton-card mb-4\">\n            <div class=\"bg-gray-700 rounded-lg ${height} w-full relative overflow-hidden animate-pulse\">\n              <div class=\"absolute inset-0 bg-gradient-to-r from-gray-700 via-gray-600 to-gray-700 skeleton-shimmer\"></div>\n            </div>\n          </div>\n        `;\n        })\n        .join('');\n\n      // Update DOM in next frame for smooth rendering\n      requestAnimationFrame(() => {\n        imageGallery.innerHTML = skeletonCards;\n      });\n    });\n\n    // Add shimmer animation style if not exists\n    if (!document.getElementById('skeleton-style')) {\n      const style = document.createElement('style');\n      style.id = 'skeleton-style';\n      style.textContent = `\n        @keyframes shimmer {\n          0% { transform: translateX(-100%); }\n          100% { transform: translateX(100%); }\n        }\n        .skeleton-shimmer {\n          animation: shimmer 1.5s infinite;\n        }\n      `;\n      document.head.appendChild(style);\n    }\n  }\n\n  // Show skeleton for total results\n  if (totalResults) {\n    totalResults.innerHTML = `\n      <span class=\"inline-block h-5 w-24 bg-gray-700 rounded relative overflow-hidden align-middle\">\n        <span class=\"absolute inset-0 bg-gradient-to-r from-gray-700 via-gray-600 to-gray-700 skeleton-shimmer\"></span>\n      </span>\n    `;\n  }\n\n  // Make AJAX request with cache busting\n  const cacheBuster = '&_t=' + new Date().getTime();\n  const apiUrl = window.API_URL || 'api.php';\n  const requestUrl = apiUrl + '?' + urlParams.toString() + cacheBuster;\n\n  fetch(requestUrl)\n    .then((response) => {\n      if (!response.ok) {\n        throw new Error('Network response was not ok: ' + response.status);\n      }\n      return response.text(); // Get as text first to debug\n    })\n    .then((text) => {\n      try {\n        return JSON.parse(text);\n      } catch (e) {\n        throw new Error('Invalid JSON response: ' + text.substring(0, 200));\n      }\n    })\n    .then((data) => {\n      if (data.error) {\n        console.error('Server error:', data.error);\n        if (imageGallery) {\n          imageGallery.innerHTML =\n            '<div class=\"w-full text-center text-white py-20 text-lg col-span-full\">Server error: ' +\n            escapeHtml(data.error) +\n            '</div>';\n        }\n        return;\n      }\n      if (imageGallery) {\n        imageGallery.innerHTML = data.html;\n        // Re-observe lazy images after AJAX update\n        setTimeout(() => {\n          observeLazyImages();\n        }, 50);\n      }\n      if (totalResults) {\n        totalResults.textContent = data.total + ' results';\n\n        // Trigger animation reliably\n        totalResults.classList.remove('animate-fade-slide');\n\n        // Use requestAnimationFrame to ensure the browser paints the removal\n        requestAnimationFrame(() => {\n          requestAnimationFrame(() => {\n            totalResults.classList.add('animate-fade-slide');\n          });\n        });\n      }\n\n      // Update pagination controls\n      updatePaginationControls(data.page || 1, data.totalPages || 1, data.total || 0);\n\n      // Update Clear All button visibility (desktop and mobile)\n      if (typeof window.updateDesktopClearAllVisibility === 'function') {\n        window.updateDesktopClearAllVisibility();\n      }\n      if (typeof window.updateClearAllButtonVisibility === 'function') {\n        window.updateClearAllButtonVisibility();\n      }\n\n      // Reinitialize image card overlays if needed\n      if (typeof initializeImageCards === 'function') {\n        initializeImageCards();\n      }\n    })\n    .catch((error) => {\n      console.error('Error loading images:', error);\n      if (imageGallery) {\n        imageGallery.innerHTML =\n          '<div class=\"w-full text-center text-white py-20 text-lg col-span-full\">Error: ' +\n          escapeHtml(error.message) +\n          '</div>';\n      }\n    });\n}\n"],
  "mappings": "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",
  "names": ["BREAKPOINTS", "ENVIRONMENT", "event", "safeEventHandler", "handler", "args", "error", "escapeHtml", "text", "div", "debounce", "func", "wait", "timeout", "later", "elements", "refreshElementCache", "id", "initializeSidebar", "initializeSearchBar", "initializeDesktopFilters", "initializeMobileSidebar", "initializeMobileFilters", "initializeMobileFilterPopups", "initializeSearchTags", "initializeSidebarFooter", "initializeMobileAllTools", "initializeFilterHandlers", "initializeImageLazyLoading", "initializePeopleCountButtons", "loadImageDirectly", "img", "src", "loadImage", "imageLoader", "isInViewport", "rect", "loadVisibleImages", "remainingImages", "imageObserver", "entries", "observer", "entry", "observeLazyImages", "sidebar", "collapseBtn", "mainContent", "sidebarLogo", "sidebarDivider", "headerLogo", "isCollapsed", "handleResize", "screenWidth", "BREAKPOINTS", "applySidebarCollapse", "applySidebarExpand", "link", "svg", "helperIcons", "foucStyle", "searchInput", "clearIcon", "toggleClearButton", "detail", "chevron", "filtersButton", "target", "isDown", "isDesktopView", "filterElements", "positionPopup", "button", "popup", "buttonRect", "scrollLeft", "closeAllPopups", "except", "element", "relevancePopup", "relevanceChevron", "btn", "e", "relevanceButton", "isInsideFilter", "isInsideRelevance", "b", "mobileSidebarOverlay", "mobileSidebar", "mobileMenuBtn", "mobileSidebarClose", "mobileFiltersBtn", "mobileFilterOverlay", "closeFilterOverlayBtn", "mobileHeaderDim", "mobileAllImagesBtn", "mobileAllImagesDropdown", "mobileAllImagesText", "mobileAllImagesChevron", "categoryOptions", "radio", "selectedOption", "categoryText", "opt", "initializeImageCards", "icons", "createImageOverlay", "downloadImage", "imageId", "imgElement", "showNotification", "openImageEditor", "saveToCollection", "collections", "findSimilarImages", "searchForm", "message", "type", "notification", "colors", "handleImageAction", "action", "imageAlt", "card", "downloadBtn", "editBtn", "saveBtn", "discoverBtn", "searchTags", "tagsContainer", "scrollLeftBtn", "scrollRightBtn", "tag", "tagText", "t", "updateArrows", "scrollWidth", "clientWidth", "sidebarFooterIcons", "popupRegistry", "initPopupHandler", "collapsedFooterIcons", "collapsedThemeBtn", "setupThemePopup", "mutations", "mutation", "helperIconsContainer", "isCollapsedOnLoad", "config", "buttonId", "popupId", "onOpen", "onClose", "closeOtherPopups", "otherPopup", "isCurrentlyHidden", "themeButton", "themePopup", "themeBtnWrapper", "item", "mobileAllToolsBtn", "mobileAllToolsPage", "mobileAllToolsBack", "updateFilterButtonHighlight", "isActive", "createFilterHandler", "filterName", "defaultValue", "autoApply", "resetPage", "urlParams", "newUrl", "loadImagesAjax", "saveFiltersToCache", "FILTER_CACHE_KEY", "filters", "loadFiltersFromURL", "aiType", "license", "orientation", "filetype", "color", "people", "aiRadio", "mobileAiRadio", "licenseRadio", "mobileLicenseRadio", "orientationRadio", "mobileOrientationRadio", "filetypeRadio", "mobileFiletypeRadio", "clearBtn", "hasLicense", "hasAiType", "hasOrientation", "hasFiletype", "hasColor", "hasPeople", "updateDesktopClearAllVisibility", "defaultLicense", "defaultAiType", "defaultOrientation", "defaultFiletype", "mobileDefaultLicense", "mobileDefaultAiType", "mobileDefaultOrientation", "mobileDefaultFiletype", "updateClearAllButtonVisibility", "licenseSelected", "aiTypeSelected", "orientationSelected", "filetypeSelected", "desktopDefaultLicense", "desktopDefaultAiType", "desktopDefaultOrientation", "desktopDefaultFiletype", "currentColor", "currentPeople", "colorValue", "mobileOverlay", "colorPopup", "mobileColorPopup", "peopleValue", "peoplePopup", "mobilePeoplePopup", "prevPageButton", "nextPageButton", "pageInput", "paginationUrlParams", "currentPageFromUrl", "totalPagesMatch", "totalPages", "prevPage", "url", "nextPage", "newPage", "mobilePrevPageButton", "mobileNextPageButton", "mobilePageInput", "mobileTotalPagesEl", "mobileTotalPages", "updatePaginationControls", "currentPage", "totalResults", "prevPageBtn", "nextPageBtn", "pageInfoText", "mobilePrevPageBtn", "mobileNextPageBtn", "newPageInput", "updateButtonState", "isDisabled", "isPrevDisabled", "isNextDisabled", "imageGallery", "skeletonCards", "_", "i", "heights", "style", "cacheBuster", "requestUrl", "response", "data"]
}
